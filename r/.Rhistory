library(tidyverse)
peers <- c(
"Columbia University in the City of New York",
"Brown University",
"Cornell University",
"Dartmouth College",
"Duke University",
"Harvard University",
"Massachusetts Institute of Technology",
"Princeton University",
"Stanford University",
"Yale University",
"University of Chicago",
"University of Pennsylvania"
)
raw_data <- readxl::read_excel("Most-Recent-Field-Data-Elements.xlsx")
raw_data %>%
filter(INSTNM %in% peers) %>%
fillter(MD_EARN_WNE == "PrivacySuppressed" | DEBTMEDIAN == "PrivacySuppressed") %>%
count()
raw_data %>%
filter(INSTNM %in% peers) %>%
filter(MD_EARN_WNE == "PrivacySuppressed" | DEBTMEDIAN == "PrivacySuppressed") %>%
count(INSTNM, MD_EARN_WNE, DEBTMEDIAN)
raw_data %>%
filter(INSTNM %in% peers) %>%
filter(MD_EARN_WNE == "PrivacySuppressed" | DEBTMEDIAN == "PrivacySuppressed") %>%
count(INSTNM, MD_EARN_WNE)
raw_data %>%
filter(INSTNM %in% peers) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
count(INSTNM, MD_EARN_WNE)
raw_data %>%
filter(INSTNM %in% peers) %>%
mutate(MD_EARN_WNE = if_else(MD_EARN_WNE == "PrivacySuppressed", 0, 1)) %>%
count(INSTNM, MD_EARN_WNE)
raw_data %>%
filter(INSTNM %in% peers) %>%
mutate(MD_EARN_WNE = if_else(MD_EARN_WNE == "PrivacySuppressed", FALSE, TRUE)) %>%
count(INSTNM, MD_EARN_WNE)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
mutate(pct = n() / total) %>%
count(INSTNM, MD_EARN_WNE)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
summarize(pct = n() / total)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed")
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
summarize(pct = n())
3 / c(1, 2, 3)
(3 / c(1, 2, 3))[0]
(3 / c(1, 2, 3))
(3 / c(1, 2, 3))[1]
(3 / c(1, 2, 3))[2]
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
summarize(pct = (n() / total)[1])
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE == "PrivacySuppressed") %>%
summarize(pct = (n() / total)[1] * 100)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE != "PrivacySuppressed") %>%
summarize(pct = (n() / total)[1] * 100)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM, CREDDESC) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE != "PrivacySuppressed") %>%
summarize(pct = (n() / total)[1] * 100)
raw_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM, CREDDESC) %>%
mutate(total = n()) %>%
filter(MD_EARN_WNE != "PrivacySuppressed") %>%
summarize(pct = (n() / total)[1] * 100) %>%
View()
data <- raw_data %>%
filter(
MD_EARN_WNE != "PrivacySuppressed" &
DEBTMEDIAN != "PrivacySuppressed"
) %>%
mutate(
COUNT = as.numeric(COUNT),
MD_EARN_WNE = as.numeric(MD_EARN_WNE),
DEBTMEDIAN = as.numeric(DEBTMEDIAN)
)
get_cred_data <- function(cred) {
fields <- data %>%
filter(INSTNM == "Columbia University in the City of New York") %>%
filter(CREDDESC == cred) %>%
pull(CIPCODE) %>%
unique()
data %>%
filter(CREDDESC == cred) %>%
filter(CIPCODE %in% fields) %>%
mutate(color = ifelse(INSTNM %in% peers, INSTNM, "other"))
}
plot_cred_data <- function(cred) {
cred_data <- get_cred_data(cred) %>%
mutate(DEBTMEDIAN = DEBTMEDIAN / 1000, MD_EARN_WNE = MD_EARN_WNE / 1000)
limits <- cred_data %>%
group_by(CIPDESC) %>%
summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
cred_data %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(data = cred_data %>% filter(color == "other"), color = "grey", alpha = 0.3) +
geom_point(data = cred_data %>% filter(color != "other"), aes(color = color)) +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ CIPDESC, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
}
plot_cred_data("First Professional Degree")
get_cred_data("Master's Degree")
get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York")
library(plyr)
get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York") %>% ddply("DEBTMEDIAN", summarize, num = seq(0, COUNT))
get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York") %>% ddply("DEBTMEDIAN", summarize, num = seq(COUNT, COUNT))
get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York") %>% ddply("DEBTMEDIAN", summarize, num = seq(, COUNT))
library(data.table)
dt <- data.table(get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York"))
dt[, list(year = seq(0, 1)), by = DEBTMEDIAN]
dt[, list(year = seq(0, COUNT)), by = DEBTMEDIAN]
cred <- get_cred_data("Bachelor\u0092s Degree") %>% filter(INSTNM == "Columbia University in the City of New York")
cred %>% rowwise()
cred %>% mutate(from = 0, to = COUNT) %>%  rowwise() %>% do(data.frame(name = .$name, year = seq(.$from, .$to, by = 1)))
cred %>% mutate(from = 0, to = COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>%  mutate(from = 0, to = COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0) %>% rename(to = COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0) %>% rename(COUNT = to)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0) %>% rename("to = COUNT")
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT) %>% pull(DEBTMEDIAN) %>% unique()
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT)
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT) %>% do(data.frame(name = .$name, year = seq(.$from, .$to, by = 1)))
cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT) %>% adply(1, summarise, year = seq(from, to))[c("DEBTMEDIAN", "num")]
dt <- cred %>% select(DEBTMEDIAN, COUNT) %>% mutate(from = 0, to = COUNT) %>% select(-COUNT) %>% data.table()
dt
dt[, list(year = seq(from, to)), by = c("name", "from")]
dt[, list(year = seq(from, to)), by = c("DEBTMEDIAN", "from")]
expandRows
?expandRows
library(splitstackshape)
install.packages('splitstackshape')
library(splitstackshape)
cred
cred %>% expandRows("COUNT")
cred %>% expandRows("COUNT") %>% ggplot(aes(DEBTMEDIAN)) %>% geom_histogram()
cred %>% expandRows("COUNT") %>% ggplot(aes(DEBTMEDIAN)) + geom_histogram()
cred %>% expandRows("COUNT") %>% ggplot(aes(MEDIAN_EARN_WNE)) + geom_histogram()
cred %>% expandRows("COUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_histogram()
cred %>% expandRows("COUNT") %>% pull(MD_EARN_WNE) %>% summary()
cred %>% select(COUNT, MD_EARN_WNE)
cred %>% expandRows("COUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_freqpoly()
cred %>% expandRows("COUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_smooth()
cred %>% expandRows("COUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_histogram()
cred %>% expandRows("COUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_histogram() + coord_flip()
cred %>% expandRows("EARNINGSCOUNT") %>% ggplot(aes(MD_EARN_WNE)) + geom_histogram() + coord_flip()
cred
get_cred_data("Bachelor\u0092s Degree")
cred
cred %>% ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) + geom_abline(slope = 1) + geom_point() + geom_text(label = CIPDESC)
cred %>% ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) + geom_abline(slope = 1) + geom_point() + geom_text(label = CREDDESC)
cred %>% ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) + geom_abline(slope = 1) + geom_point() + geom_text(aes(label = CIPDESC))
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %IN% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(CIPDESC) %>%
summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM, CIPDESC) %>%
summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
View(limits)
get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM, CIPDESC) %>%
summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE))
get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM, CIPDESC) %>%
summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE))
get_cred_data("Bachelor\u0092s Degree")
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>% summarize(n())
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>% summarize(n = n())
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>% summarize()
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>% summarize(n)
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>% summarize(n = n())
get_cred_data("Bachelor\u0092s Degree") %>% summarize(n = n())
library(dplyr)
get_cred_data("Bachelor\u0092s Degree") %>% summarize(n = n())
get_cred_data("Bachelor\u0092s Degree") %>% dplyr::summarize(n = n())
get_cred_data("Bachelor\u0092s Degree") %>% group_by(INSTNM, CIPDESC) %>%  dplyr::summarize(n = n())
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM, CIPDESC) %>%
DPLYR::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM, CIPDESC) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
# geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(INSTNM, y)
limits
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(INSTNM, y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = 0) %>%
arrange(INSTNM, y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(x = y) %>%
arrange(INSTNM, y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(y = y * 1.1, x = y) %>%
arrange(INSTNM, y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & INSTNM == "Columbia University in the City of New York") %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
limits <- get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(y = y * 1.05, x = y) %>%
arrange(INSTNM, y)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(aes(color = CIPDESC)) +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
geom_text_repel
library(ggrepel)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & grepl("Columbia", INSTNM)) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(aes(label = CIPDESC)) +
geom_text_repel() +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & grepl("Columbia", INSTNM)) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(aes(label = CIPDESC)) +
geom_text_repel(aes(label = CIPDESC)) +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(aes(label = CIPDESC)) +
geom_text_repel(aes(label = CIPDESC)) +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & grepl("Columbia", INSTNM)) %>%
ggplot(aes(reorder(CIPDESC, DEBTMEDIAN), DEBTMEDIAN)) +
geom_col()
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & grepl("Columbia", INSTNM)) %>%
ggplot(aes(reorder(CIPDESC, DEBTMEDIAN), DEBTMEDIAN)) +
geom_col() +
coord_flip()
get_cred_data("Bachelor\u0092s Degree") %>%
filter(INSTNM %in% peers & grepl("Columbia", INSTNM)) %>%
ggplot(aes(reorder(CIPDESC, MD_EARN_WNE), MD_EARN_WNE)) +
geom_col() +
coord_flip()
plot_schools <- function(cred) {
cred_data <- get_cred_data(cred)
limits <- cred_data %>%
filter(INSTNM %in% peers) %>%
group_by(INSTNM) %>%
dplyr::summarize(min = 0, max = max(DEBTMEDIAN, MD_EARN_WNE)) %>%
gather(lim_label, y, min, max) %>%
mutate(y = y * 1.05, x = y) %>%
arrange(INSTNM, y)
cred_data %>%
filter(INSTNM %in% peers) %>%
ggplot(aes(DEBTMEDIAN, MD_EARN_WNE)) +
geom_abline(slope = 1) +
geom_point(aes(label = CIPDESC)) +
geom_text_repel(aes(label = CIPDESC)) +
geom_blank(data = limits, aes(x, y)) +
facet_wrap(~ INSTNM, scales = "free") +
expand_limits(x = 0, y = 0) +
scale_x_continuous(expand = c(0, 0), labels = scales::dollar) +
scale_y_continuous(expand = c(0, 0), labels = scales::dollar)
}
plot_schools("Bachelor\u0092s Degree")
plot_schools("Master's Degree")
